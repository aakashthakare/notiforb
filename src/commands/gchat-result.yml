description: >
  This command notifies about job success and failure through provided webhook.

parameters:
  message:
    type: string
    description: Text message to send on Google Chat.

steps:
  - run:
      when: on_success
      environment:
        GCHAT_REQ_TEMPLATE: <<include(templates/gchat-request.template)>>
        NORB_MESSAGE: "${CIRCLE_JOB} successful."
        name: gchat-result
        command: <<include(scripts/gchat-notify.sh)>>
  - run:
      when: on_fail
      environment:
        GCHAT_REQ_TEMPLATE: <<include(templates/gchat-request.template)>>
        NORB_MESSAGE: "${CIRCLE_JOB} failed."
        name: gchat-result
        command: <<include(scripts/gchat-notify.sh)>>