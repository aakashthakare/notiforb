description: >
  This command notifies through provided webhook.

parameters:
  type:
    type: string
    description: Type of chat to which we need to send notification.
  webhook:
    type: string
    description: Webhook URL of chat.

steps:
  - run:
      name: success
      when: on_success
      command: |
        echo -e 'export NORB_STATUS="SUCCESS"' > /tmp/NORB_ENVS
  - run:
      name: failure
      when: on_fail
      command: |
        echo 'export NORB_STATUS="FAIL"' > /tmp/NORB_ENVS
  - run:
      environment:
        TYPE: <<parameters.type>>
        WEBHOOK: <<parameters.webhook>>
      name: notify
      command: <<include(scripts/notify.sh)>>
