description: >
  This command notifies through provided webhook.

parameters:
  webhook:
    type: string
    description: Webhook URL of Google Chat.

steps:
  - run:
      name: success
      when: on_success
      command: |
        echo -e 'export NORB_STATUS="SUCCESS"' > /tmp/NORB_ENVS
  - run:
      name: failure
      when: on_fail
      command: |
        echo 'export NORB_STATUS="FAIL"' > /tmp/NORB_ENVS
  - run:
      environment:
        WEBHOOK: <<parameters.webhook>>
      name: gchat-notify
      command: <<include(scripts/gchat-notify.sh)>>
